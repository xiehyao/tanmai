# 🚨 探脉 tanmai 强制规则 - 必读 🚨

## 1. Git 提交是强制要求（后端 & 小程序）

- **凡是对 `tanmai/` 目录下的代码 / 配置 / 资源做出「非临时性改动」时，AI 必须完成以下操作：**
  1. **使用 `git diff` / `git status` 自检改动内容是否符合预期；**
  2. **执行 `git add` 将相关文件全部加入暂存区；**
  3. **执行 `git commit`，写清楚本次改动目的（例如：`后端：恢复 auth/cards/users 接口`、`小程序：首页布局优化` 等）。**
- **绝对禁止** 长时间（跨多次会话）保留「重要代码仅存在于工作区、没有任何 commit」的状态。
- 如遇到不方便立刻提交（例如仅做临时调试），**必须在对话里明确说明是临时代码，并在结束前恢复/提交**，避免后续会话误以为是稳定状态。

> 解释：之前已经发生过「后端关键文件未入库，后续被删后无法从 Git 恢复」的严重事故，本规则用于彻底避免同类问题再次发生。

## 2. `.cursorrules` 一旦缺失，必须第一时间重建

- **如果 AI 检测到 `tanmai/.cursorrules` 被删除、重命名或内容为空：**
  1. **必须立即新建或恢复本文件**，至少包含本文件当前这两条核心规则；
  2. 在对话中向用户说明「已自动重建 `.cursorrules`，继续执行强制 git 提交策略」；
  3. 之后的所有改动依然要遵守「每次改完必须提交 git」的约定。

> 解释：`.cursorrules` 本身也是受保护对象，一旦缺失会导致后续会话忘记强制提交约定，因此必须自动补上。

## 3. 适用范围

- 本规则适用于以下路径及其所有子目录：
  - `tanmai/backend/`
  - `tanmai/wx-mini/`
  - `tanmai/frontend/`
  - 以及未来新增的与探脉项目直接相关的目录。

AI 在这些路径内进行任何实质性改动时，**都必须结合本规则执行完整的 Git 提交流程**。***
